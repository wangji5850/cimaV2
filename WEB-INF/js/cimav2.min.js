function reqStr2Obj(){var a=location.search;if(""===a)return!1;a=a.substring(1);for(var b=a.split("&"),c={},d=b.length-1;d>=0;d--){var e=b[d].split("=");c[e[0]]=e[1]}return c}!function(a){a.fn.extend({myShow:function(b){return a(this).removeClass("hide").show(),this},myHide:function(b){return a(this).addClass("hide"),this}})}(jQuery);var index={init:function(){$(window).scroll(function(){$(window).scrollTop()>=100?$(".backtop").fadeIn(300):$(".backtop").fadeOut(300)}),$(".backtop").click(function(){$("html,body").animate({scrollTop:"0px"},1e3)}),$("#j_main_slider .li").eq(0).show(),slider._domLoaded=!0,slider.mainSlider(),this.for_items(),$(".p_index .floor5 .mask").on("mouseover",function(){var a=$(this).index()-2,b=$(".p_index .floor5 .group").eq(a);_tar=$(".p_index .floor5 .message"),_tar.html(b.html()),$(".mask").eq(a).hide().siblings().show()}),$(".p_index .floor5 .mask").eq(0).trigger("mouseover"),$("#join1").click(function(){var a=$(this),b=$(".floor2 .con").find(".group:first-child a").attr("href");a.attr("href",b)}),$("#join2").click(function(){var a=$(this),b=$(".floor2 .con").find(".group").eq(1).find("a").attr("href");a.attr("href",b)}),$(".own a").click(function(){var a=$(this),b=$(".floor2 .big_banner").find(".group a").attr("href");a.attr("href",b)})},for_items:function(){function a(a){var b=$(".m_floor3 .con .ul");-1==a?(b.find(".group").last().prependTo(b.css("marginLeft","-310px")),b.animate({marginLeft:0},"slow")):b.animate({marginLeft:"-310px"},"slow",function(){b.find(".group").first().appendTo(b),b.css("marginLeft",0)})}var b=setInterval(a,2e3);$("#leftBtn").click(function(){a(-1)}),$("#rightBtn").click(function(){a(1)}),$(".m_floor3").hover(function(){clearInterval(b)},function(){b=setInterval(a,2e3)})}},cima_intr={init:function(){slider._domLoaded=!0,slider.mainSlider(),index.for_items(),marquee.mainMarquee(),$(".floor4 .m_reason_wrap .group").eq(0).addClass("current")}},career={init:function(){$(function(){$(".feed_back .a").hover(function(){var a=$(this);$(".feed_back .li_c").eq(a.index()).show().siblings().hide(),a.addClass("curr").siblings().removeClass("curr")}),$(".about_fu.tabs0 .li").hover(function(){var a=$(this);a.addClass("curr").siblings().removeClass("curr"),a.parent().parent().find(".page_list").children(".ul").eq(a.index()).removeClass("hide").show().siblings(".ul").hide()}),$(".floor2 .group").on("mouseover",".intro1",function(a){var b=$(this),c=b.parents(".group");c.siblings(".group").find(".img").hide().end().find(".intro1").removeClass("curr"),c.siblings(".group").find(".intro2").hide(),c.find(".img").show().end().find(".intro1").addClass("curr"),c.find(".intro2").show()}),$(".floor2 .group .intro:first").trigger("mouseover")})}},examzone={init:function(){$.post(G.opt.post_url+"/exampa/fixed-prefecture?random="+Math.random(),{},function(a,b,c){0==a.flag?$.each(a.data,function(a,b){G.show_data(b,$("#list_tmpl"),$(".page_list").eq(a)),$(".page_list").find("a").hover(function(){var a=$(this).html();$(this).attr("title",a)})}):layer.msg(a.msg)})}},articleMore={init:function(){var a=this,b=(window.location.search+"").replace("?type=","");$(".catalog").on("click",".li",function(b){var c=$(this);c.addClass("curr").siblings(".li").removeClass("curr"),a.getItems(c.data("type")),$(".main_r .title_wrap .tit").text(c.text())}),$(".catalog .li").eq(b-1).click()},getItems:function(a){$.post(G.opt.post_url+"/exampa/list-prefecture?random="+Math.random(),{type:a||1,pageNo:G.get_qa_pn()||1,pageSize:10},function(a,b,c){if(console.log(a),0==a.flag){G.show_data(a.data.list,$("#list_tmpl"),$(".page_list"));var d=a.data.rowBounds;G.loadPager(d.pageNo,d.totalCount,d.pageSize,function(){$(".catalog .li.curr").click()})}else layer.msg(a.msg)})}},articleDes={init:function(){$(".catalog .li").click(function(){var a=$(this).attr("data-type");window.location.href=basePath+"/htmlcima/checkmore.html?type="+a}),$(".btn_wrap span a").hover(function(){var a=$(this).html();$(this).attr("title",a)})}},student={init:function(){$(function(){for(var a=$(".p_eli_stu .floor3 .group").length,b=0;a>=b;b++){var c=b;$(".p_eli_stu .floor3 .group").eq(c).attr("data-str",c+1)}var d=$('<div class="btn_wrap"></div>'),a=Math.round($(".floor2 .group ").length/2);if(!(1>=a)){for(var b=0;a-1>=b;b++){var e=$("<div><span></span></div>");e.appendTo(d)}d.find("span").eq(0).addClass("checkon"),d.appendTo($(".floor2 .wrapper")),$(".floor2 .wrapper").find(".btn_wrap").find("div").hover(function(){var a=$(this);if("checkon"!=a.find("span").attr("class")){var b=2*a.index(),c=2*b+1;$(".group_wrap .group").hide(),$(".group_wrap .group").eq(b).fadeIn("slow"),$(".group_wrap .group").eq(c).fadeIn("slow"),a.find("span").addClass("checkon"),a.siblings().find("span").removeClass("checkon")}})}})}},employers={init:function(){$(function(){$(".about_fu.tabs0 .li").hover(function(){var a=$(this);a.addClass("curr").siblings().removeClass("curr"),a.parent().parent().find(".page_list").children(".ul").eq(a.index()).removeClass("hide").show().siblings(".ul").hide()}),$(".about_pdfbox").hover(function(){$(this).find(".about_pdf").hide(),$(this).find(".about_pdf_hover").show()},function(){$(this).find(".about_pdf_hover").hide(),$(this).find(".about_pdf").show()}),$(".floor2 .group").eq(0).find(".intro3").addClass("on"),$(".floor2 .group").find(".intro3").hover(function(){"intro intro3 on"!=$(this).attr("class")&&($(this).parent().siblings().find(".intro1,.intro2").hide(),$(this).siblings("div").show(),$(this).addClass("on"),$(this).parent().siblings().find(".intro3").removeClass("on"))})})}},teacher={init:function(){var a=this;$(".p_teacher .floor2 .group .intro3").each(function(a,b){var c=$(this);c.attr("vid",c.text()).text("他的视听")}),$(".p_teacher .floor2 .group").on("click",".intro3",function(b){a.set_player($(this).attr("vid"))})},set_player:function(a){var b=this;a?$.post("http://10.10.30.95/onlines/getSign/"+a+"?random="+Math.random(),{},function(a){0==a.flag?($("#polyvplayer,#mask").show(),player=polyvObject("#polyvplayer").videoPlayer({width:"100%",height:"100%",vid:a.data.vid,sign:a.data.sign,ts:a.data.ts,flashParams:{wmode:"transparent",allowScriptAccess:"always",allowFullScreen:"true",quality:"high"},flashvars:{autoplay:"1",is_auto_replay:"on",ban_history_time:"on",watchStartTime:0,start:0}}),b.openIfram()):(layer.msg(a.msg),layer.closeAll())}):($("#polyvplayer,#mask").hide(),layer.msg("该老师目前没有视频"))},openIfram:function(){layer.open({type:1,shade:!1,area:["485px","315px"],title:!1,scrollbar:!1,maxmin:!1,fix:!1,content:$("#polyvplayer"),zIndex:layer.zIndex,success:function(a){layer.setTop(a)},end:function(){$("#mask").hide()}})}},freeItem={init:function(){$("#join1").click(function(){var a=$(this),b=$(".floor2 .con").find(".group:first-child a").attr("href");a.attr("href",b)}),$("#join2").click(function(){var a=$(this),b=$(".floor2 .con").find(".group").eq(1).find("a").attr("href");a.attr("href",b)})}},quafly={init:function(){}},study_center={init:function(a,b){$.get(G.opt.post_url+"/course/subject-list?random="+Math.random(),{classId:b},function(a){$(".p_l_catalog").html(""),G.show_data(a.data.subjectList,$("#tmpl_subject_list"),$(".p_l_catalog")),G.show_data(a.data.videoList,$("#tmpl_catalog_list"),$(".p_l_catalog .tit").first().next()),$(".p_l_catalog .tit").first().find(".rt_part .ico2").removeClass("arrow"),$(".p_l_catalog .tit").length>1&&$(".p_l_catalog .tit").eq(1).trigger("click"),1==$(".p_l_catalog .tit").first().parent().data("type")&&$(".p_l_catalog .tit").first().next().find(".practice").remove()}),$(".page_list .p_l_catalog").on("click",".tit",function(){var c=$(this);if(c.find(".rt_part .ico2").hasClass("arrow")){var d=c.parent().attr("data-id");$.get(G.opt.post_url+"/course/video-list?random="+Math.random(),{subjectId:d,classId:b},function(b){if(0==b.flag)try{c.next().html(""),G.show_data(b.data,$("#tmpl_catalog_list"),c.next()),1==c.parent().data("type")&&c.next().find(".practice").remove(),0!=a&&$(".p_l_catalog .li_c .abc").attr("href","javascript:showNoAuthBox("+a+");")}catch(d){console.log(d)}else alert(b.msg)})}c.find(".rt_part .ico2").toggleClass("arrow").end().parent().children(".ul_c").toggle()})}},record={init:function(){var a=this;a.getList()},getList:function(){var a=this;$.post(G.opt.post_url+"/account/learn?random="+Math.random(),{pageNo:G.get_qa_pn()||1,pageSize:10},function(b,c,d){if(0==b.flag){G.show_data(b.data.list,$("#tmplrecord"),$(".page_list"));var e=b.data.rowBounds;G.loadPager(e.pageNo,e.totalCount,e.pageSize,function(){a.getList()})}else layer.msg(b.msg)})}},showLog=function(a,b){function c(){var c=$('<div class="dialog"><p class="con">'+a+'</p><p class="tip">'+b+"</p></div>");c.appendTo($("body")),c.css({"margin-left":-(c.outerWidth(!0)/2),"margin-top":-c.outerHeight(!0)/2}),setTimeout(function(){c.remove()},2e3)}c(),layer.open({type:1,title:!1,closeBtn:0,shadeClose:!0,skin:"yourclass",content:$(".dialog")})},marquee={templates:{tpl_trigger:'<span data-index="{index}">{start}-{end}</span>',tpl_servTrigger:'<span data-index="{index}">{name}</span>'},mainMarquee:function(){var a=".floor4 .m_reason_wrap",b=".group",c="#page_span",d=10;this.createTab($(a).find(c),this.templates.tpl_trigger,$(a).find(b).length,d),this.marquee()},createTab:function(a,b,c,d){if(!(2>c)){for(var e=[],f=0;f<Math.ceil(c/d);f++)e.push(b.replace(/\{(\w+)\}/g,function(a,b){return"start"==b?f*d+1:"end"==b?(f+1)*d>c?c:(f+1)*d:"index"==b?f*d:void 0}));a.html(e.join(""))}},marquee:function(a){function b(a){var b=d.find(c.contentCls+".current").index();-1==a?b+1<e.length&&b++:b>0&&b--,e.removeClass("current").eq(b).addClass("current"),f.removeClass("on").eq(Math.floor(b/c.pageSize)).addClass("on")}var c={areaCls:".floor4 .m_reason_wrap",contentCls:".group",titleId:"#page_span",titleTag:"span",leftId:"#left",rightId:"#right",pageSize:10};$.extend(c,a);var d=$(c.areaCls),e=d.find(c.contentCls),f=d.find(c.titleId+" "+c.titleTag);parseInt(e.eq(0).css("margin-left"))+parseInt(e.eq(0).css("margin-right")),d.width();f.eq(0).addClass("on"),d.on("click",c.rightId,function(){b(-1)}),d.on("click",c.leftId,function(){b(1)}),f.click(function(){var a=$(this).attr("data-index");e.removeClass("current").eq(a).addClass("current"),f.removeClass("on").eq(Math.floor(a/c.pageSize)).addClass("on")})}},learn={signTmpl:$("#tmplsign_up"),init:function(){var a=this;a.sign(null,0)},sign:function(a,b){var c=this;return a&&a.length>0&&a.parent(".has_sign").length>0?(layer.msg("已签到"),!1):void $.post(basePath+"/account/sign?random="+Math.random(),{type:b},function(a){var b;0==a.flag&&(b={date:a.data.dateString,days:a.data.cumulativeTotal,hasSign:a.data.hasSign},a.data.hasSign?(b.text="已签到",$("#sign_up").addClass("has_sign")):(b.text="签到打卡",b.ev="learn.sign($(this),1)"),G.show_data([b],c.signTmpl,$("#sign_up")))})}},online={startDuration:0,init:function(a,b,c,d){a&&(b&&4>b&&(b>0&&$(".msg_box.no_author .cont").children(".attend").hide().end().children(".tips").text("目前正在审核中，若有问题请联系客服"),$(".no_author").show()),4==b&&"true"==c&&($(".msg_box.no_author .cont").children(".attend").hide().end().children(".tips").text("目前正在审核中，若有问题请联系客服"),$(".no_author").show())),$(".play_area").hover(function(){$(".video_info").slideUp()},function(){$(".video_info").slideDown()}),$(".video .for_menu").on("click",".tit",function(){var a=$(this);if(a.children(".ico").hasClass("arrow")){var b=a.parent().attr("data-id");$.get(basePath+"/course/video-list",{subjectId:b},function(b){0==b.flag?(a.next().html(""),G.show_data(b.data,$("#tmpl_video_list"),a.next()),G.spreadParg($(".for_menu .right .name"),2,0),$(".for_menu .right .name").css("display","inline")):alert(b.msg)})}a.children(".ico").toggleClass("arrow").end().parent().children(".ul_c").toggle()}),$(".full_screen .main_r").on("click",".control",function(){$(".full_screen").hasClass("has_spread")?($(this).parent().css("width","300px"),$(".full_screen").css("padding-right","315px"),$(".full_screen").removeClass("has_spread")):($(this).parent().css("width","0"),$(".full_screen").css("padding-right","15px"),$(".full_screen").addClass("has_spread"))});var e,f=!1;window.onbeforeunload=function(a){hasLogined&&player&&(e=player.j2s_getCurrentTime(),$.ajaxSetup({cache:!1}),$.ajax({url:basePath+"/course/"+d+"/leave",async:!1,type:"post",dataType:"json",data:{endPoint:e,overFlag:f}}))}},video_heart_break:function(a,b){var c=this,d=$("#resourceId").val(),e=player&&player.j2s_stayInVideoTime?player.j2s_stayInVideoTime():0,f=player&&player.j2s_realPlayVideoTime?player.j2s_realPlayVideoTime():0,g=player&&player.j2s_getCurrentTime?player.j2s_getCurrentTime():0;$.post(basePath+"/postVideoHeartBreak?random="+Math.random(),{videoId:d,stayInVideoTime:e,realPlayTime:f,duration:a?a:g,startDuration:c.startDuration,classId:classId},function(a){0==a.flag&&(c.startDuration=b?b:g)})},video_record:function(a,b){$.post(basePath+"/course/updateCourseFinished?random="+Math.random(),{videoId:a,classId:b},function(a){})}};