function show_resultList(a){$(".c_notes").html(""),$.each(a,function(a,b){b.name=b.videoName,b.id=b.videoId,b.sequence=b.videoSequence,$.each(b.noteList,function(a,b){b.nickName=b.ownerNickName}),b.id=b.videoId}),G.show_data(a,$("#tmpl_video_note_list"),$(".c_notes")),$(".c_notes .cc_notes").each(function(){$(this).children().last().addClass("last")})}$.extend(cache_processor,{getSelectedId:function(a){return $("#"+a).find("span.cur-select").attr("selectedId")},intiAddressSelect:function(a,b){var c=$("#"+a),d=$("#"+b),e=c.find("span.cur-select");e.attr("selectedId",null),e.text("请选择省份");var f=c.find("div.select");f.html(""),$.each(cacheAddressMap,function(c,d){f.append("<p onclick=\"G.cache_processor.selectProvince('"+a+"', '"+b+"',"+d.id+');">'+d.name+"</p>")});var g=d.find("span.cur-select");g.attr("selectedId",null),g.text("请选择城市"),d.find("div.select").html("")},selectProvince:function(a,b,c){var d=$("#"+a),e=$("#"+b),f=null==c?null:cacheAddressMap[c],g=d.find("span.cur-select");g.attr("selectedId",c),g.text(null==f?"请选择省份":f.name),d.find("div.select").hide();var h=e.find("span.cur-select");h.attr("selectedId",null),h.text("请选择城市");var i=e.find("div.select");i.html(""),null!=f&&$.each(f.cityList,function(a,c){i.append("<p onclick=\"G.cache_processor.selectCity('"+b+"', "+c.id+",'"+c.name+"');\">"+c.name+"</p>")})},selectCity:function(a,b,c){var d=$("#"+a),e=d.find("span.cur-select");e.attr("selectedId",b),e.text(null==b?"请选择城市":c),d.find("div.select").hide()},intiIndustryCacheData:function(){void 0!=cacheIndustryList&&null!=cacheIndustryList&&0!=cacheIndustryList.length||$.get(G.opt.post_url+"/cache/industryList?random="+Math.random(),{},function(a){0==a.flag&&(cacheIndustryList=a.data)})},intiIndustrySelect:function(a){var b=$("#"+a),c=b.find("span.cur-select");c.attr("selectedId",null),c.text("请选择行业");var d=b.find("div.select");d.html(""),void 0==cacheIndustryList||null==cacheIndustryList||0==cacheIndustryList.length?$.get(G.opt.post_url+"/cache/industryList?random="+Math.random(),{},function(b){0==b.flag&&(cacheIndustryList=b.data,$.each(cacheIndustryList,function(b,c){d.append("<p onclick=\"G.cache_processor.selectIndustry('"+a+"', "+c.id+",'"+c.name+"');\">"+c.name+"</p>")}))}):$.each(cacheIndustryList,function(b,c){d.append("<p onclick=\"G.cache_processor.selectIndustry('"+a+"', "+c.id+",'"+c.name+"');\">"+c.name+"</p>")})},selectIndustry:function(a,b,c){var d=$("#"+a),e=d.find("span.cur-select");e.attr("selectedId",b),e.text(null==b?"请选择行业":c),d.find("div.select").hide()}}),$.extend(G,{cache_processor:cache_processor}),$.extend(exercise_set,{init:function(){$(".page_list .hot_sheet").on("click",".store",function(){var a=$(this),b=a.parents(".li").attr("data-id");a.hasClass("has_store")?$.post(G.opt.post_url+"/exsets/"+b+"/uncollect?random="+Math.random(),{noteId:b},function(b){a.html('<i class="ico"></i>收藏 ('+b.data.collectNum+")")}):$.post(G.opt.post_url+"/exsets/"+b+"/collect?random="+Math.random(),{noteId:b},function(b){a.html('<i class="ico"></i>收藏 ('+b.data.collectNum+")")}),a.toggleClass("has_store")})},loadPager:function(a,b,c,d){var e=G;$("#pageNo").val(a),$("#pageCount").val(Math.ceil(b/c)),$("#totalCount").val(b);var f=a,g=Math.ceil(b/c),h=b;g<=1?$("#pager").hide():$("#pager").pager({pagenumber:f,pagecount:g,totalnumber:h,buttonClickCallback:function(a){e.set_qa_pn(a),G.exercise_set.pageClick(a,c,d)}}).show().find("a").prop("href","#mainw_content")},pageClick:function(a,b,c){var d=G,e="";1==c?e="/exsets/hot":2==c?e="/account/exset-self":3==c?e="/account/exset-other":4==c&&(e="/account/exset-collect"),c<2?$.get(d.opt.post_url+e+"?random="+Math.random(),{pageNo:a,pageSize:b},function(b){$(".hot_sheet").html(""),1==c?G.show_data(b.data.exsetVoList,$("#tmpl_exercise_set_list"),$(".hot_sheet")):G.show_data(b.data.resultList,$("#tmpl_exercise_set_list"),$(".hot_sheet")),$(".hot_sheet .chot_sheet").each(function(){$(this).children().last().addClass("last")}),G.set_qa_tn(b.data.rowBounds.totalCount),G.exercise_set.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)}):3==c?$.myPost(d.opt.post_url+e+"?random="+Math.random(),{pageNo:a,pageSize:b,accountIdOfAnother:$("#accountIdOfAnother").val()},function(b){if(0!=b.flag)return void console.log(b.msg);$(".hot_sheet").html(""),1==c?G.show_data(b.data.exsetVoList,$("#tmpl_exercise_set_list"),$(".hot_sheet")):G.show_data(b.data.resultList,$("#tmpl_exercise_set_list"),$(".hot_sheet")),$(".hot_sheet .chot_sheet").each(function(){$(this).children().last().addClass("last")}),G.set_qa_tn(b.data.rowBounds.totalCount),G.exercise_set.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)}):$.myPost(d.opt.post_url+e+"?random="+Math.random(),{pageNo:a,pageSize:b},function(b){if(0!=b.flag)return void console.log(b.msg);$(".hot_sheet").html(""),1==c?G.show_data(b.data.exsetVoList,$("#tmpl_exercise_set_list"),$(".hot_sheet")):G.show_data(b.data.resultList,$("#tmpl_exercise_set_list"),$(".hot_sheet")),$(".hot_sheet .chot_sheet").each(function(){$(this).children().last().addClass("last")}),G.set_qa_tn(b.data.rowBounds.totalCount),G.exercise_set.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)})}}),$.extend(G,{exercise_set:exercise_set}),$.extend(exset_detail,{init:function(){},get_detail_pn:function(){return $("#exser_detail_ul").attr("data-page")},set_detail_pn:function(a){$("#exser_detail_ul").attr("data-page",a)},loadPager:function(a,b,c){G;$("#pageNo").val(a),$("#pageCount").val(Math.ceil(b/c)),$("#totalCount").val(b);var d=a,e=Math.ceil(b/c),f=b;e<=1?$("#pager").hide():$("#pager").pager({pagenumber:d,pagecount:e,totalnumber:f,buttonClickCallback:function(a){G.exset_detail.set_detail_pn(a),G.exset_detail.pageClick(a)}}).show()},pageClick:function(a){var b=G;$.get(b.opt.post_url+"/exsets/"+$("#exsetId").val()+"?random="+Math.random(),{pageNo:a,pageSize:5},function(b){$("#exser_detail_ul").children(".li").remove(),G.show_data(b.data.exsetVo,$("#tmpl_exset_detail_list"),$("#exser_detail_ul")),G.exset_detail.set_detail_pn(b.data.rowBounds.totalCount),G.exset_detail.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize)})}}),$.extend(G,{exset_detail:exset_detail}),$.extend(focus,{init:function(){$(".p_my_focus").on("click",".focus",function(){var a=$(this),b=a.parents(".li").attr("data-id");a.hasClass("has_focus")?$.myPost(G.opt.post_url+"/account/offFocus?random="+Math.random(),{accountIdOfToOnFocus:b},function(b){if(0!=b.flag)return void alert(b.msg);a.removeClass("has_focus")}):$.myPost(G.opt.post_url+"/account/onFocus?random="+Math.random(),{accountIdOfToOnFocus:b},function(b){if(0!=b.flag)return void alert(b.msg);a.addClass("has_focus")})}),$(".u_info .operate").on("click",".btn1",function(){var a=$(this),b=a.attr("data-id");"已关注"!=a.text()?$.post(G.opt.post_url+"/account/onFocus?random="+Math.random(),{accountIdOfToOnFocus:b},function(b){a.html("已关注")}):$.post(G.opt.post_url+"/account/offFocus?random="+Math.random(),{accountIdOfToOnFocus:b},function(b){a.html("+ 关注")})})},loadPager:function(a,b,c){var d=G;$("#pageNo").val(a),$("#pageCount").val(Math.ceil(b/c)),$("#totalCount").val(b);var e=a,f=Math.ceil(b/c),g=b;f<=1?$("#pager").hide():$("#pager").pager({pagenumber:e,pagecount:f,totalnumber:g,buttonClickCallback:function(a){d.set_qa_pn(a),G.focus.pageClick(a,c)}}).show()},pageClick:function(a,b){var c=G;$.post(c.opt.post_url+"/account/focus-self?random="+Math.random(),{pageNo:a,pageSize:b},function(a){$(".p_my_focus .ul").html(""),G.show_data(a.data.resultList,$("#tmpl_focus_list"),$(".p_my_focus .ul")),$(".totalcount").find("i").html(a.data.rowBounds.totalCount),a.data.rowBounds.pageCount>1&&G.focus.loadPager(G.get_qa_pn(),a.data.rowBounds.totalCount,a.data.rowBounds.pageSize)})}}),$.extend(G,{focus:focus}),$.extend(login,{doLogin:function(){var a=$("#login_div"),b=!0,c=a.find("input[name='loginName']"),d=c.parent("div").next(".error"),e=c.val(),f=G.phoneValid(e),g=G.emailValid(e);0==f&&0==g?(b=!1,d.show()):d.hide();var h=a.find("input[name='loginPass']"),i=h.parent("div").next(".error"),j=h.val();if(0==G.pwdValid(j)?(b=!1,i.html('<i class="ico"></i>密码长度6~16位').show()):i.hide(),0!=b){var k={loginName:e,loginPass:calcMD5(j).toLowerCase(),remember:$("#login_div i.ico").hasClass("checked")};$.post(G.opt.post_url+"/login?random="+Math.random(),k,function(a){if(0==a.flag){var b=document.referrer;window.location.href=b&&b!=window.location.href&&-1==b.indexOf("register")&&-1==b.indexOf("look-for-pwd")?b:G.opt.post_url}else i.html('<i class="ico"></i>'+a.msg).show()})}},logout:function(){$.post(G.opt.post_url+"/logout?random="+Math.random(),{},function(a){window.location.href=G.opt.post_url})}}),$.extend(G,{login:login}),$.extend(look_for_pwd,{phoneOrEmailOpt:{exist:!1},checkPhoneOrEmailStrong:function(){var a=$("#look_for_pwd_div"),b=!0,c=a.find("input[name='phoneOrEmail']"),d=c.parents("li.li").find("div.error"),e=c.val();if(0==G.phoneValid(e)&&0==G.emailValid(e)?(b=!1,d.show(),register.setBtnColor($(".login_reg .get_phone_code"),0)):(d.hide(),register.setBtnColor($(".login_reg .get_phone_code"),1)),0!=b){var f={phoneOrEmail:e};$.post(G.opt.post_url+"/account/on-look-for-pwd-chke?random="+Math.random(),f,function(a){0==a.flag?(G.look_for_pwd.phoneOrEmailOpt.exist=!0,register.setBtnColor($(".login_reg .get_phone_code"),1)):(G.look_for_pwd.phoneOrEmailOpt.exist=!1,d.show(),register.setBtnColor($(".login_reg .get_phone_code"),0))})}},sendCheckCodeOpt:{canSend:!0,intervalObj:null,currentSecond:60},sendCheckCodeInterFunc:function(){var a=$("#look_for_pwd_div"),b=a.find("input[name='checkCode']"),c=b.parents("li.li").find("span[name='checkCodeOper']"),d=G.look_for_pwd.sendCheckCodeOpt;d.currentSecond<=0?(window.clearInterval(d.intervalObj),d.currentSecond=60,d.canSend=!0,c.attr("disabled",null),c.text("重新发送"),register.setBtnColor(c,1)):(d.currentSecond--,c.text("已发送("+d.currentSecond+"s)"),register.setBtnColor(c,0))},sendCheckCode:function(){if(1==G.look_for_pwd.sendCheckCodeOpt.canSend){var a=$("#look_for_pwd_div"),b=!0,c=a.find("input[name='phoneOrEmail']"),d=c.parents("li.li").find("div.error"),e=c.val();0==G.phoneValid(e)&&0==G.emailValid(e)?(b=!1,d.show()):d.hide();var f=a.find("input[name='checkCode']"),g=f.parents("li.li").find("span[name='checkCodeOper']");if(0!=b){G.look_for_pwd.sendCheckCodeOpt.canSend=!1,g.attr("disabled","disabled");var h={phoneOrEmail:e};$.post(G.opt.post_url+"/checkCode/sendForLookForPwd?random="+Math.random(),h,function(a){0==a.flag?G.look_for_pwd.sendCheckCodeOpt.intervalObj=window.setInterval(G.look_for_pwd.sendCheckCodeInterFunc,1e3):(G.look_for_pwd.sendCheckCodeOpt.canSend=!0,g.attr("disabled",null),g.text("发送失败，重新发送"))})}}},doResetPwd:function(){var a=$("#look_for_pwd_div"),b=!0,c=a.find("input[name='phoneOrEmail']"),d=c.parents("li.li").find("div.error"),e=c.val();0==G.phoneValid(e)&&0==G.emailValid(e)||0==G.look_for_pwd.phoneOrEmailOpt.exist?(b=!1,d.show()):d.hide();var f=a.find("input[name='checkCode']"),g=f.parents("li.li").find("div.error"),h=f.val();null==h||4!=h.length?(b=!1,g.show()):g.hide();var i=a.find("input[name='newPassword']"),j=i.parents("li.li").find("div.error"),k=i.val();if(0==(G.pwdValid(k)&&G.strongpwd_ck(k))?(b=!1,j.show()):j.hide(),0!=b){var l={phoneOrEmail:e,checkCode:h,newPassword:k};$.post(G.opt.post_url+"/account/on-look-for-pwd?random="+Math.random(),l,function(a){0==a.flag?window.location.href=G.opt.post_url+"/login":alert(a.msg)})}},cancel:function(){window.location.href=G.opt.post_url}}),$.extend(G,{look_for_pwd:look_for_pwd}),$.extend(note,{init:function(){$(".page_list .c_notes").on("click",".rt_part",function(){$(this).find(".ico").toggleClass("arrow").end().parents(".right").children(".div").toggle()}),$(".page_list .c_notes, .for_note .ul_c").on("click",".store",function(){var a=$(this),b=a.parents(".li_c").attr("data-id");a.hasClass("has_store")?$.myPost(G.opt.post_url+"/note/unCollect?random="+Math.random(),{noteId:b},function(b){0==b.flag&&(a.html('<i class="ico"></i>收藏 ('+b.data.collectCount+")"),a.toggleClass("has_store"))}):$.myPost(G.opt.post_url+"/note/collect?random="+Math.random(),{noteId:b},function(b){0==b.flag&&(a.html('<i class="ico"></i>收藏 ('+b.data.collectCount+")"),a.toggleClass("has_store"))})}),$(".page_list .c_notes").on("click",".del",function(){var a=$(this),b=a.parents(".li_c").attr("data-id");$.myPost(G.opt.post_url+"/note/delete?random="+Math.random(),{noteId:b},function(b){a.parents(".li_c").remove()})}),$(".page_list .c_notes").on("click",".see_more",function(){var a=$(this);G.note.viewMore(a)})},loadPager:function(a,b,c,d){var e=G;$("#pageNo").val(a),$("#pageCount").val(Math.ceil(b/c)),$("#totalCount").val(b);var f=a,g=Math.ceil(b/c),h=b;g<=1?$("#pager").hide():$("#pager").pager({pagenumber:f,pagecount:g,totalnumber:h,buttonClickCallback:function(a){e.set_qa_pn(a),G.note.pageClick(a,c,d)}}).show().find("a").prop("href","#mainw_content")},pageClick:function(a,b,c){var d=G,e="";if($(".c_notes").html(""),1==c?e="/note/video-list":2==c?e="/account/note-self":3==c?e="/account/note-other":4==c&&(e="/account/note-collect"),3!=c)$.myPost(d.opt.post_url+e+"?random="+Math.random(),{pageNo:a,pageSize:b},function(b){if(0!=b.flag)return void console.log(b.msg);$(".c_notes").html(""),1==c?G.show_data(b.data.videoList,$("#tmpl_video_note_list"),$(".c_notes")):show_resultList(b.data.resultList),$(".c_notes .cc_notes").each(function(){$(this).children().last().addClass("last")}),G.set_qa_tn(b.data.rowBounds.totalCount),G.note.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)});else{var f=$("#otherAccountId").val();$.myPost(d.opt.post_url+e+"?random="+Math.random(),{accountIdOfAnother:f,pageNo:a,pageSize:b},function(b){if(0!=b.flag)return void console.log(b.msg);$(".c_notes").html(""),1==c?G.show_data(b.data.videoList,$("#tmpl_video_note_list"),$(".c_notes")):show_resultList(b.data.resultList),$(".c_notes .cc_notes").each(function(){$(this).children().last().addClass("last")}),G.set_qa_tn(b.data.rowBounds.totalCount),G.note.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)})}},viewMore:function(a){var b=G,c=a.parent().parent().attr("data-id"),d=a.prev().attr("data-page"),e=a.prev().attr("data-pagecount");$.myPost(b.opt.post_url+"/note/note-list?random="+Math.random(),{videoId:c,type:0,pageNo:parseInt(d)+1,pageSize:e},function(b){if(0!=b.flag)return void console.log(b.msg);G.IsEmpty(b.data.noteList)||(G.show_data(b.data.noteList,$("#tmpl_note_list"),a.prev()),$(".c_notes .cc_notes").each(function(){$(this).children().removeClass("last"),$(this).children().last().addClass("last")}),a.prev().attr("data-page",parseInt(d)+1)),b.data.rowBounds.pageCount<=b.data.rowBounds.pageNo&&a.hide()})}}),$.extend(G,{note:note}),$.extend(private_message,{init:function(){$.post(G.opt.post_url+"/chat/getprops?random="+Math.random(),function(a){if(""!=a.data&&null!=a.data){if("undefined"!=typeof WebSocket)var b=new WebSocket(a.data.wsUrl);else var b=new SockJS(a.data.stompUrl);var c=Stomp.over(b),d=function(b){var d=a.data.queueName;id=c.subscribe(d,function(a){var b=$.parseJSON(a.body),c=b.msgType,d=b.fromid,e=0,f=!0;$("#div_msg_account li").each(function(){var a=$(this).attr("data-id");$(this).hasClass("curr")&&(e=a),d==a&&(f=!1)}),f&&2==c&&$.post(G.opt.post_url+"/chat/search-fromId?random="+Math.random(),{contactId:d},function(a){""!=a.data&&null!=a.data&&$("#div_msg_account").prepend($("#tmpl_msg_account").tmpl(a.data))},"json"),2==c?d==e?($("#div_msg_list").append($("#tmpl_msg_list").tmpl(b)),$("#msg_p_scroll").mCustomScrollbar("scrollTo","bottom"),$("#foot_message").is(":visible")&&($("#contactId"+d+" i:eq(0)").addClass("mark"),$("#foot_message i:eq(0)").addClass("mark"))):($("#contactId"+d+" i:eq(0)").addClass("mark"),$("#foot_message i:eq(0)").addClass("mark")):($("#div_msg_list").append($("#tmpl_msg_list").tmpl(b)),$("#msg_p_scroll").mCustomScrollbar("scrollTo","bottom"))})},e=function(){};c.connect(a.data.user,a.data.password,d,e,a.data.vHost)}},"json"),$("#top_message").hide(),$("#keywordMSG").val(""),$("#foot_message").on("click",function(){$(this).hide(),$("#top_message").show()}),$("#close_message").on("click",function(){$("#top_message").hide(),$("#foot_message").show()}),G.private_message.listContactList(),$("#keywordMSG").on("change",function(){G.private_message.searchAccount($(this).val())}),$("#searchMSG").on("click",function(){G.private_message.searchAccount($("#keywordMSG").val())}),$("#sendMSG").on("click",function(){var a=$.trim($("#contentMSG").val()),b=$.trim($("#contactIdMSG").val());if(""==a)return void $("#contentMSG").focus();""!=b&&$.post(G.opt.post_url+"/chat/send-msg?random="+Math.random(),{contactId:b,contentMSG:a},function(a){$("#contentMSG").val("")},"json")})},listContactList:function(){$.post(G.opt.post_url+"/chat/contact-list?random="+Math.random(),function(a){$("#div_msg_account").html(""),null!=a.data.resultList&&""!=a.data.resultList&&($("#div_msg_account").append($("#tmpl_msg_account").tmpl(a.data.resultList)),a.data.flag&&$("#foot_message i:eq(0)").addClass("mark"))},"json")},openMessage:function(a){$("#foot_message").hide(),$("#top_message").show(),$("#contactNickName").html(""),$("#contactIdMSG").val(a);var b=!0;$("#div_msg_account li").each(function(){var c=$(this).attr("data-id");a==c&&(b=!1,$("#contactNickName").html($(this).attr("data-name")),$(this).addClass("curr").siblings().removeClass("curr"))}),b&&($("#div_msg_account li").each(function(){$(this).removeClass("curr")}),$.post(G.opt.post_url+"/chat/search-contactId?random="+Math.random(),{contactId:a},function(a){""!=a.data&&null!=a.data&&($("#div_msg_account").prepend($("#tmpl_msg_account").tmpl(a.data)),$("#contactNickName").html(a.data.nickName))},"json")),G.private_message.msgList(a)},selectAccount:function(a){$("#contactNickName").html($("#contactId"+a).attr("data-name")),$("#contactId"+a).addClass("curr").siblings().removeClass("curr"),$("#contactId"+a+" i:eq(0)").removeClass("mark"),$("#contactIdMSG").val(a),G.private_message.msgList(a),G.private_message.removeMSG()},deleteAccount:function(a){$.post(G.opt.post_url+"/chat/contanct-delete?random="+Math.random(),{contactId:a},function(b){$("#contactIdMSG").val(),$("#contactId"+a).remove(),$("#contactNickName").html(""),$("#moreMsg").hide(),$("#div_msg_list").html(""),G.private_message.removeMSG()},"json")},removeMSG:function(){var a=!0;$("#div_msg_account li").each(function(){var b=$(this).attr("data-id");$("#contactId"+b+" i:eq(0)").hasClass("mark")&&(a=!1)}),a&&$("#foot_message i:eq(0)").removeClass("mark")},msgList:function(a,b){$("#moreMsg").hide(),$("#pageNoMSG").val(1),$("#div_msg_list").html(""),$.post(G.opt.post_url+"/chat/msg-list?random="+Math.random(),{contactId:a,lastId:b,pageNo:1},function(c){""!=c.data.resultList&&null!=c.data.resultList&&($("#div_msg_list").append($("#tmpl_msg_list").tmpl(c.data.resultList)),c.data.rowBounds.pageCount>1&&($("#moreMsg").off("click"),$("#moreMsg").show(),$("#moreMsg").on("click",function(){G.private_message.moreMSG(a,b)}))),$("#msg_p_scroll").mCustomScrollbar("scrollTo","bottom")},"json")},moreMSG:function(a,b){var c=parseInt($("#pageNoMSG").val())+1;$.post(G.opt.post_url+"/chat/msg-list?random="+Math.random(),{contactId:a,lastId:b,pageNo:c},function(a){""!=a.data.resultList&&null!=a.data.resultList&&($("#div_msg_list").prepend($("#tmpl_msg_list").tmpl(a.data.resultList)),$("#msg_p_scroll").mCustomScrollbar("scrollTo","top"),$("#pageNoMSG").val(c),a.data.rowBounds.pageCount<=c&&$("#moreMsg").hide())},"json")},searchAccount:function(a){a=$.trim(a),""!=a?$("#div_msg_account li").each(function(){$.trim($(this).attr("data-name")).indexOf(a)>=0?$(this).show():$(this).hide()}):$("#div_msg_account li").each(function(){$(this).show()})}}),$.extend(G,{private_message:private_message}),$.extend(qa,{loadPager:function(a,b,c,d){var e=G;$("#pageNo").val(a),$("#pageCount").val(Math.ceil(b/c)),$("#totalCount").val(b);var f=a,g=Math.ceil(b/c),h=b;g<=1?$("#pager").hide():$("#pager").pager({pagenumber:f,pagecount:g,totalnumber:h,buttonClickCallback:function(a){e.set_qa_pn(a),G.qa.pageClick(a,c,d)}}).show().find("a").prop("href","#mainw_content")},pageClick:function(a,b,c){var d=G,e="";1==c?e="/question/hot-question":2==c?e="/account/qa-self":3==c?e="/account/qa-other":4==c&&(e="/account/qa-focus"),$.myPost(d.opt.post_url+e+"?random="+Math.random(),{pageNo:a,pageSize:b},function(b){if(0!=b.flag)return void console.log(b.msg);$("#div_qa_list").html(""),G.show_data(b.data.resultList,$("#tmpl_qa_list"),$("#div_qa_list")),G.spreadParg($(".study_area .cont"),2),G.set_qa_tn(b.data.rowBounds.totalCount),G.qa.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)})}}),$.extend(G,{qa:qa}),$.extend(register,{checkUser:function(){var a=$("#register_phone_div .nick_name input").val();G.phoneValid(a)?$.post(G.opt.post_url+"/checkPhoneUnique?random="+Math.random(),{phone:a},function(a){-1==a.flag?(""!=a.msg&&(layer.msg(a.msg),G.register.sendSmsCodeOpt.canSend=!1),register.setBtnColor($(".login_reg .get_phone_code"),0)):(register.setBtnColor($(".login_reg .get_phone_code"),1),G.register.sendSmsCodeOpt.canSend=!0)}):register.setBtnColor($(".login_reg .get_phone_code"),0)},doRegisterByEmail:function(){var a=$("#register_email_div"),b=!0,c=a.find("input[name='email']"),d=c.parents("li.li").find("div.error"),e=c.val();0==G.emailValid(e)?(b=!1,d.show()):d.hide();var f=a.find("input[name='password']"),g=f.parents("li.li").find("div.error"),h=f.val();if(0==(G.pwdValid(h)&&G.strongpwd_ck(h))?(b=!1,g.html('<i class="ico"></i>请输入6~16位密码,至少包含数字、字母或符号中的两种。').show()):g.hide(),0!=b){var i={phoneOrEmail:e,password:h};$.post(G.opt.post_url+"/register?random="+Math.random(),i,function(a){0==a.flag?window.location.href=G.opt.post_url+a.data:layer.msg(a.msg)})}},doRegisterByPhone:function(){var a=$("#register_phone_div"),b=!0,c=a.find("input[name='phone']"),d=c.parents("li.li").find("div.error"),e=c.val();0==G.phoneValid(e)?(b=!1,d.show()):d.hide();var f=a.find("input[name='imgCode']"),g=f.parents("li.li").find("div.error"),h=f.val();null==h||4!=h.length?(b=!1,g.show()):g.hide();var i=a.find("input[name='smsCode']"),j=i.parents("li.li").find("div.error"),k=i.val();null==k?(b=!1,j.show()):j.hide();var l=a.find("input[name='password']"),m=l.parents("li.li").find("div.error"),n=l.val();if(0==(G.pwdValid(n)&&G.strongpwd_ck(n))?(b=!1,m.html('<i class="ico"></i>请输入6~16位密码,至少包含数字、字母或符号中的两种。').show()):m.hide(),0!=b){var o={phoneOrEmail:e,imgCode:h,smsCode:k,password:n};$.post(G.opt.post_url+"/register?random="+Math.random(),o,function(a){0==a.flag?window.location.href=G.opt.post_url:layer.msg(a.msg)})}},getImgCode:function(){$("#register_phone_div").find("img[name='imgCodeOper']").attr("src",G.opt.post_url+"/checkCode/getImgCode?time="+(new Date).getTime())},sendSmsCodeOpt:{canSend:!0,intervalObj:null,currentSecond:60},sendSmsCodeInterFunc:function(){var a=$("#register_phone_div"),b=a.find("input[name='smsCode']"),c=b.parents("li.li").find("span[name='smsCodeOper']"),d=G.register.sendSmsCodeOpt;d.currentSecond<=0?(window.clearInterval(d.intervalObj),d.currentSecond=60,d.canSend=!0,c.removeAttr("disabled").text("重新发送"),register.setBtnColor(c,1)):(d.currentSecond--,c.text("已发送("+d.currentSecond+"s)"),register.setBtnColor(c,0))},setBtnColor:function(a,b){b?a.css({backgroundColor:"#3CBFB1",color:"#fff"}):a.css({backgroundColor:"#E9E9E9",color:"#666"})},sendSmsCode:function(){if(1==G.register.sendSmsCodeOpt.canSend){var a=$("#register_phone_div"),b=!0,c=a.find("input[name='phone']"),d=c.parents("li.li").find("div.error"),e=c.val();0==G.phoneValid(e)?(b=!1,d.show()):d.hide();var f=a.find("input[name='imgCode']"),g=f.parents("li.li").find("div.error"),h=f.val();null==h||4!=h.length?(b=!1,g.show()):g.hide();var i=a.find("input[name='smsCode']"),j=i.parents("li.li").find("span[name='smsCodeOper']");if(0!=b){G.register.sendSmsCodeOpt.canSend=!1,j.attr("disabled","disabled");var k={phone:e};$.post(G.opt.post_url+"/checkCode/sendSmsForRegister?random="+Math.random(),k,function(a){0==a.flag?G.register.sendSmsCodeOpt.intervalObj=window.setInterval(G.register.sendSmsCodeInterFunc,1e3):(G.register.sendSmsCodeOpt.canSend=!0,j.attr("disabled",null),j.text("发送失败，重新发送"))})}}}}),$.extend(G,{register:register}),$.extend(search_result,{doSearch:function(){var a=$("#search_input").val();if(0==a.length)return!1;a.length>1?window.location.href=G.opt.post_url+"/search-result?keyword="+a+"&random="+Math.random():alert("从没有人不输入两个汉字的，很好，你已经成功引起了我的注意~")},init:function(a){var b=this;b.keyword=a,b.init_data(),$("#search_input").val(b.keyword)},keyword:"",init_data:function(){var a=G;$.get(a.opt.post_url+"/search/subject?random="+Math.random(),{keyword:a.search_result.keyword,pageNo:1},function(b){0==b.flag?(a.show_data(b.data.resultList,$("#tmpl_subject_catalog_list"),$(".p_l_catalog")),b.data.numFound>b.data.pageSize&&a.search_result.loadPager(1,b.data.numFound,b.data.pageSize,1)):console.log("网络异常")})},showTab:function(a){var b=G,c="";1==a?c="subject":2==a?c="question":3==a&&(c="account"),$.get(b.opt.post_url+"/search/"+c+"?random="+Math.random(),{keyword:b.search_result.keyword,pageNo:1},function(c){0==c.flag?1==a?($(".p_l_catalog").text(""),b.show_data(c.data.resultList,$("#tmpl_subject_catalog_list"),$(".p_l_catalog")),c.data.numFound>c.data.pageSize&&b.search_result.loadPager(1,c.data.numFound,c.data.pageSize,1)):2==a?($(".study_area").text(""),b.show_data(c.data.resultList,$("#tmpl_qa_list"),$(".study_area")),c.data.numFound>c.data.pageSize&&b.search_result.loadPager(1,c.data.numFound,c.data.pageSize,2)):3==a&&($(".p_my_focus").text(""),b.show_data(c.data.resultList,$("#tmpl_focus_list"),$(".p_my_focus")),c.data.numFound>c.data.pageSize&&b.search_result.loadPager(1,c.data.numFound,c.data.pageSize,3)):console.log("网络异常")})},loadPager:function(a,b,c,d){var e=G;$("#pageNo").val(a),$("#pageCount").val(Math.ceil(b/c)),$("#totalCount").val(b);var f=a,g=Math.ceil(b/c),h=b;g<=1?$("#pager").hide():$("#pager").pager({pagenumber:f,pagecount:g,totalnumber:h,buttonClickCallback:function(a){e.set_qa_pn(a),G.search_result.pageClick(a,c,d)}}).show()},pageClick:function(a,b,c){var d=G,e="";1==c?e="subject":2==c?e="question":3==c&&(e="account"),$.get(d.opt.post_url+"/search/"+e+"?random="+Math.random(),{keyword:d.search_result.keyword,pageNo:a},function(b){1==c?($(".p_l_catalog").text(""),d.show_data(b.data.resultList,$("#tmpl_subject_catalog_list"),$(".p_l_catalog")),b.data.numFound>b.data.pageSize&&d.search_result.loadPager(a,b.data.numFound,b.data.pageSize,1)):2==c?($(".study_area").text(""),d.show_data(b.data.resultList,$("#tmpl_qa_list"),$(".study_area")),b.data.numFound>b.data.pageSize&&d.search_result.loadPager(a,b.data.numFound,b.data.pageSize,2)):3==c&&($(".p_my_focus").text(""),d.show_data(b.data.resultList,$("#tmpl_focus_list"),$(".p_my_focus")),b.data.numFound>b.data.pageSize&&d.search_result.loadPager(a,b.data.numFound,b.data.pageSize,3))})}}),$.extend(G,{search_result:search_result}),$.extend(setting,{checkPhone:function(){var a=$("#setting_safe_phone .nick_name input").val();G.phoneValid(a)?register.setBtnColor($("#setting_safe_phone .get_phone_code"),1):register.setBtnColor($("#setting_safe_phone .get_phone_code"),0)},init:function(a){$.myPost(G.opt.post_url+"/account/to-setting?random="+Math.random(),{},function(b){if(0==b.flag){var c=b.data.account;0!=a&&1!=a||G.setting.initBasic(c,b.data.city,b.data.industry),0!=a&&2!=a||G.setting.initPhoto(c),0!=a&&3!=a||G.setting.initSafe(c),0!=a&&4!=a||G.setting.initPref(b.data.accountPreference)}else alert(b.msg)})},initBasic:function(a,b,c){var d=$("#setting_basci_div");d.find("input[name='nickName']").val(a.nickName),d.find("input[name='name']").val(a.name),d.find("input[name='alphaLastName']").val(a.alphaLastName),d.find("input[name='alphaFirstName']").val(a.alphaFirstName);var e=a.gender;1==e||2==e?d.find("input[name='gender']").eq(e).attr("checked","checked"):d.find("input[name='gender']").eq(0).attr("checked","checked");var f=null,g=null,h=null;null!=b&&null!=(f=b.provinceId)&&(g=b.id,h=b.name),G.cache_processor.selectProvince("setting_province","setting_city",f),G.cache_processor.selectCity("setting_city",g,h);var i=null,j=null;null!=c&&(i=c.id,j=c.name),G.cache_processor.selectIndustry("setting_industry",i,j),d.find("input[name='company']").val(a.company),d.find("input[name='position']").val(a.position),for_selct()},initPhoto:function(a){var b=$("#setting_photo_div"),c=a.photo;c=null==c||""==c?G.opt.post_url+"/images/icos/photo96.jpg":c,b.find("img").attr("src",c)},initSafe:function(a){var b=$("#setting_safe_div");b.find("input[name='phone']").val(a.phone),b.find("input[name='email']").val(a.email),b.find("input:password").val("")},initPref:function(a){var b=$("#setting_pref_div"),c=a.courseLanguage;1==c||2==c?b.find("input[name='courseLanguage']").eq(c-1).attr("checked","checked"):b.find("input[name='courseLanguage']").eq(0).attr("checked","checked");var d=a.exerciseLanguage;1==d||2==d?b.find("input[name='exerciseLanguage']").eq(d-1).attr("checked","checked"):b.find("input[name='exerciseLanguage']").eq(0).attr("checked","checked")},setBasic:function(){var a=$("#setting_basci_div"),b=!0,c=a.find("input[name='nickName']"),d=c.parents("li.li").find("div.error"),e=c.val(),f=void 0!=e&&null!=e&&""!=e?G.getByteCount(e):0;f<=0||f>16||0==/^[\u0391-\uFFE5A-Za-z0-9]+$/.test(e)?(b=!1,d.show()):d.hide();var g=a.find("input[name='name']"),h=g.parents("li.li").find("div.error"),i=g.val(),j=void 0!=i&&null!=i&&""!=i?G.getByteCount(i):0;j<0||j>32||j>0&&0==/^[\u0391-\uFFE5A-Za-z\s]+$/.test(i)?(b=!1,h.show()):h.hide();var k=a.find("input[name='alphaLastName']"),l=a.find("input[name='alphaFirstName']"),m=k.parents("li.li").find("div.error"),n=k.val(),o=l.val(),p=void 0!=n&&null!=n&&""!=n?G.getByteCount(n):0,q=void 0!=o&&null!=o&&""!=o?G.getByteCount(o):0;p<0||p>32||p>0&&0==/^[A-Za-z]+$/.test(n)||q<0||q>32||q>0&&0==/^[A-Za-z]+$/.test(o)?(b=!1,m.show()):m.hide();var r=a.find("input[name='gender']:checked").val(),s=G.cache_processor.getSelectedId("setting_city"),t=G.cache_processor.getSelectedId("setting_industry"),u=a.find("input[name='company']"),v=u.parents("li.li").find("div.error"),w=u.val(),x=void 0!=w&&null!=w&&""!=w?G.getByteCount(w):0;x<0||x>256?(b=!1,v.show()):v.hide();var y=a.find("input[name='position']"),z=y.parents("li.li").find("div.error"),A=y.val(),B=void 0!=A&&null!=A&&""!=A?G.getByteCount(A):0;if(B<0||B>256?(b=!1,z.show()):z.hide(),0!=b){var C={nickName:e,name:i,alphaLastName:n,alphaFirstName:o,gender:r,cityId:s,industryId:t,company:w,position:A};$.myPost(G.opt.post_url+"/account/on-setting-basic?random="+Math.random(),C,function(a){0==a.flag?layer.msg("操作成功"):layer.msg(a.msg)})}},setPassword:function(){var a=$("#setting_safe_div"),b=!0,c=a.find("input[name='oldPwd']"),d=c.parents("li.li").find("div.error"),e=c.val();0==G.pwdValid(e)?(b=!1,d.show()):d.hide();var f=a.find("input[name='newPwd1']"),g=f.parents("li.li").find("div.error"),h=f.val();0==G.pwdValid(h)||0==G.strongpwd_ck(h)?(b=!1,g.show()):g.hide();var i=a.find("input[name='newPwd2']"),j=i.parents("li.li").find("div.error");if(i.val()!=h?(b=!1,j.show()):j.hide(),0!=b){var k={oldPassword:calcMD5(e),newPassword:h};$.myPost(G.opt.post_url+"/account/on-setting-pwd?random="+Math.random(),k,function(b){0==b.flag?(a.find("input:password").val(""),layer.msg("操作成功")):layer.msg(b.msg)})}},setEmail:function(){var a=$("#setting_safe_div"),b=$("#setting_safe_email"),c=!0,d=b.find("input[name='email']"),e=d.parents("li.li").find("div.error"),f=d.val();0==G.emailValid(f)?(c=!1,e.show()):e.hide();var g=b.find("input[name='password']"),h=g.parents("li.li").find("div.error"),i=g.val();if(0==G.pwdValid(i)?(c=!1,h.show()):h.hide(),0!=c){var j={newEmail:f,password:calcMD5(i)};$.myPost(G.opt.post_url+"/account/on-setting-email?random="+Math.random(),j,function(c){0==c.flag?(layer.msg(c.msg),a.find("input[name='email']").val(f),b.hide()):alert(c.msg)})}},getImgCode:function(){
$("#setting_safe_phone").find("img[name='imgCodeOper']").attr("src",G.opt.post_url+"/checkCode/getImgCode?time="+(new Date).getTime())},sendSmsCodeOpt:{canSend:!0,intervalObj:null,currentSecond:60},sendSmsCodeInterFunc:function(){var a=$("#setting_safe_phone"),b=a.find("input[name='smsCode']"),c=b.parents("li.li").find("span[name='smsCodeOper']"),d=G.setting.sendSmsCodeOpt;d.currentSecond<=0?(window.clearInterval(d.intervalObj),d.currentSecond=60,d.canSend=!0,c.removeAttr("disabled"),c.text("重新发送"),register.setBtnColor(c,1)):(d.currentSecond--,c.text("已发送("+d.currentSecond+"s)"),register.setBtnColor(c,0))},sendSmsCode:function(){if(1==G.setting.sendSmsCodeOpt.canSend){var a=$("#setting_safe_phone"),b=!0,c=a.find("input[name='phone']"),d=c.parents("li.li").find("div.error"),e=c.val();0==G.phoneValid(e)?(b=!1,d.show()):d.hide();var f=a.find("input[name='imgCode']"),g=f.parents("li.li").find("div.error"),h=f.val();null==h||4!=h.length?(b=!1,g.show()):g.hide();var i=a.find("input[name='smsCode']"),j=i.parents("li.li").find("span[name='smsCodeOper']");if(0!=b){G.setting.sendSmsCodeOpt.canSend=!1,j.attr("disabled","disabled");var k={phone:e};$.myPost(G.opt.post_url+"/checkCode/sendSmsForSetPhone?random="+Math.random(),k,function(a){0==a.flag?G.setting.sendSmsCodeOpt.intervalObj=window.setInterval(G.setting.sendSmsCodeInterFunc,1e3):(G.setting.sendSmsCodeOpt.canSend=!0,j.attr("disabled",null),j.text("发送失败，重新发送"))})}}},setPhone:function(){var a=$("#setting_safe_div"),b=$("#setting_safe_phone"),c=!0,d=b.find("input[name='phone']"),e=d.parents("li.li").find("div.error"),f=d.val();0==G.phoneValid(f)?(c=!1,e.show()):e.hide();var g=b.find("input[name='imgCode']"),h=g.parents("li.li").find("div.error"),i=g.val();null==i||4!=i.length?(c=!1,h.show()):h.hide();var j=b.find("input[name='smsCode']"),k=j.parents("li.li").find("div.error"),l=j.val();null==l||4!=l.length?(c=!1,k.show()):k.hide();var m=b.find("input[name='password']"),n=m.parents("li.li").find("div.error"),o=m.val();if(0==G.pwdValid(o)?(c=!1,n.show()):n.hide(),0!=c){var p={newPhone:f,imgCode:i,smsCode:l,password:calcMD5(o)};$.myPost(G.opt.post_url+"/account/on-setting-phone?random="+Math.random(),p,function(c){0==c.flag?(layer.msg(c.msg),a.find("input[name='phone']").val(f),b.hide()):alert(c.msg)})}},setPrefCourseLanguage:function(){var a=$("#setting_pref_div"),b=a.find("input[name='courseLanguage']:checked").val(),c={courseLanguage:b};$.myPost(G.opt.post_url+"/account/on-setting-pref-cl?random="+Math.random(),c,function(a){0==a.flag?layer.msg("操作成功"):layer.msg("操作失败，请重试")})},setPrefExerciseLanguage:function(){var a=$("#setting_pref_div"),a=$("#setting_pref_div"),b=a.find("input[name='exerciseLanguage']:checked").val(),c={exerciseLanguage:b};$.myPost(G.opt.post_url+"/account/on-setting-pref-el?random="+Math.random(),c,function(a){0==a.flag?layer.msg("操作成功"):layer.msg("操作失败，请重试")})},setPhoto:function(){var a=$("#setting_photo_div");$.ajaxFileUpload({url:G.opt.post_url+"/account/on-setting-photo?random="+Math.random(),secureuri:!1,fileElementId:"setting_photo_input",dataType:"json",success:function(b,c){0==b.flag?(a.find("img").attr("src",b.data),layer.msg("操作成功")):layer.msg("操作失败，请重试")},error:function(a,b,c){layer.msg("操作失败，请重试")}})}}),$.extend(G,{setting:setting}),$.extend(video,{init:function(){$(".page_list .p_l_catalog").on("click",".mark",function(){var a=$(this),b=a.parents(".li_c").attr("data-id");a.hasClass("has_mark")?$.post(G.opt.post_url+"/course/unMark?random="+Math.random(),{id:b},function(b){0==b.flag&&a.toggleClass("has_mark")}):$.myPost(G.opt.post_url+"/course/mark?random="+Math.random(),{id:b},function(b){0==b.flag&&a.toggleClass("has_mark")})}),$(".page_list .my_mark").on("click",".mark",function(){var a=$(this),b=a.parents(".li_c").attr("data-id");a.hasClass("no_mark")?$.post(G.opt.post_url+"/course/mark?random="+Math.random(),{id:b},function(a){}):$.post(G.opt.post_url+"/course/unMark?random="+Math.random(),{id:b},function(a){}),a.toggleClass("no_mark")})},loadPager:function(a,b,c,d){var e=G;$("#pageNo").val(a),$("#pageCount").val(Math.ceil(b/c)),$("#totalCount").val(b);var f=a,g=Math.ceil(b/c),h=b;g<=1?$("#pager").hide():$("#pager").pager({pagenumber:f,pagecount:g,totalnumber:h,buttonClickCallback:function(a){e.set_qa_pn(a),G.video.pageClick(a,c,d)}}).show()},pageClick:function(a,b,c){var d=G,e="";if(2==c)e="/account/mark-self",$.myPost(d.opt.post_url+e+"?random="+Math.random(),{pageNo:a,pageSize:b},function(b){if(0!=b.flag)return void console.log(b.msg);$(".my_mark").html(""),G.show_data(b.data.resultList,$("#tmpl_mark_list"),$(".my_mark")),G.set_qa_tn(b.data.rowBounds.totalCount),G.video.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)});else if(3==c){e="/account/mark-other";var f=$("#otherAccountId").val();$.myPost(d.opt.post_url+e+"?random="+Math.random(),{accountIdOfAnother:f,pageNo:a,pageSize:b},function(b){if(0!=b.flag)return void console.log(b.msg);$(".my_mark").html(""),G.show_data(b.data.resultList,$("#tmpl_mark_list"),$(".my_mark")),G.set_qa_tn(b.data.rowBounds.totalCount),G.video.loadPager(a,b.data.rowBounds.totalCount,b.data.rowBounds.pageSize,c)})}}}),$.extend(G,{video:video});